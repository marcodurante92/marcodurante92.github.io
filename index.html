<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    </head>
    <body>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.serializeJSON/2.9.0/jquery.serializejson.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
        <nav class="navbar navbar-dark bg-dark">
            <span class="navbar-brand">Indagine sulla mobilità</span>
        </nav>
        <div class="container my-5">
            <div class="row justify-content-center">
                <div class="col-xs-10 col-md-8">
                    <form id="survey-form" onsubmit="event.preventDefault(); return submitSurvey()">
                        <div class="card">
                            <div class="card-body">
                                <fieldset>
                                    <div class="row justify-content-center">
                                        <div class="col">
                                            <legend class="font-weight-light">Caratteristiche socio economiche</legend>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="age-input">Età</label>
                                            <input id="age-input" class="form-control form-control-sm" type="number"
                                                name="age" value="" min="18" max="100" required>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <legend class="col-form-label pt-0">Genere</legend>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" name="gender" type="radio" id="male-radio"
                                                    value="M" required>
                                                <label class="form-check-label" for="male-radio">Maschio</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" name="gender" type="radio" id="female-radio"
                                                    value="F" required>
                                                <label class="form-check-label" for="female-radio">Femmina</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="familymember-input">Numero di componenti della famiglia</label>
                                            <div class="input-group input-group-sm mb-3">
                                                <select id="familymember-input" class="form-control" name="family_members"
                                                    required>
                                                    <option selected value=""> - </option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                </select>
                                                <div class="input-group-append input-group-prepend">
                                                    <span class="input-group-text">di cui con patente</span>
                                                </div>
                                                <select id="familydrivers-input" class="form-control" name="family_drivers"
                                                    required>
                                                    <option selected value=""> - </option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="vehicles-input">Numero di veicoli in famiglia</label>
                                            <select id="vehicles-input" name="vehicle_number" class="form-control form-control-sm">
                                                <option selected value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2+">più di 2</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="degree-input">Livello di istruzione</label>
                                            <select id="degree-input" name="degree_level" class="form-control form-control-sm">
                                                <option selected value="none">-</option>
                                                <option value="middle school">Licenzia Media (or equiv.)</option>
                                                <option value="diploma">Diploma (or equiv.)</option>
                                                <option value="three-year degree">Laurea Triennale</option>
                                                <option value="master's degree">Laurea Magistrale</option>
                                                <option value="research coverage">Dottorato di ricerca</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="profession-input">Condizione professionale</label>
                                            <select id="profession-input" name="profession" class="form-control form-control-sm">
                                                <option selected value="none">-</option>
                                                <option value="student">Studente</option>
                                                <option value="housekeeper">Casalinga</option>
                                                <option value="unemployed">Inoccupato/disoccupato</option>
                                                <option value="employed">Impiegato</option>
                                                <option value="freelancer">Libero professionista</option>
                                                <option value="business owner">Imprenditore</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="householderprofession-input">Condizione professionale
                                                capofamiglia</label>
                                            <select id="householderprofession-input" name="householder_profession"
                                                class="form-control form-control-sm">
                                                <option selected value="none">-</option>
                                                <option value="student">Studente</option>
                                                <option value="housekeeper">Casalinga</option>
                                                <option value="unemployed">Inoccupato/disoccupato</option>
                                                <option value="employed">Impiegato</option>
                                                <option value="freelancer">Libero professionista</option>
                                                <option value="business owner">Imprenditore</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="departure-input">In quale comune risiedi attualmente?</label>
                                            <input id="departure-input" name="departure" class="form-control form-control-sm">
                                        </div>
                                    </div>
                                </fieldset>
                                <hr>
                                <fieldset>
                                    <div class="row justify-content-center">
                                        <div class="col">
                                            <legend class="font-weight-light">Caratteristiche dello spostamento
                                                (Extraregionale)</legend>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <legend class="col-form-label pt-0">Hai mai preso l'alta velocità
                                                (Frecciarossa/Italo)?</legend>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" name="train" type="radio" id="train-yes-radio"
                                                    value="yes" required>
                                                <label class="form-check-label" for="train-yes-radio">Si</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" name="train" type="radio" id="train-no-radio"
                                                    value="no" required>
                                                <label class="form-check-label" for="train-no-radio">No</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <legend class="col-form-label pt-0">Hai mai preso l'aereo?</legend>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" name="plane" type="radio" id="plane-yes-radio"
                                                    value="yes" required>
                                                <label class="form-check-label" for="plane-yes-radio">Si</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" name="plane" type="radio" id="plane-no-radio"
                                                    value="no" required>
                                                <label class="form-check-label" for="plane-no-radio">No</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="annualmoves-input">In un anno, quanto ti sposti fuori dalla
                                                regione?</label>
                                            <select id="annualmoves-input" name="annual_movments" class="form-control form-control-sm">
                                                <option selected value="0-5">0-5 volte</option>
                                                <option value="6-10">6-10 volte</option>
                                                <option value="11-20">11-20 volte</option>
                                                <option value="20+">Più di 20 volte</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <legend class="col-form-label pt-0">In questi viaggi, quale modo di
                                                trasporto usi?</legend>
                                            <div class="form-check">
                                                <input id="transport-1" name="transport_method[]" class="form-check-input"
                                                    type="checkbox" value="car">
                                                <label class="form-check-label" for="transport-1">Auto</label>
                                            </div>
                                            <div class="form-check">
                                                <input id="transport-2" name="transport_method[]" class="form-check-input"
                                                    type="checkbox" value="rent car">
                                                <label class="form-check-label" for="transport-2">Auto a noleggio</label>
                                            </div>
                                            <div class="form-check">
                                                <input id="transport-3" name="transport_method[]" class="form-check-input"
                                                    type="checkbox" value="bus">
                                                <label class="form-check-label" for="transport-3">Bus</label>
                                            </div>
                                            <div class="form-check">
                                                <input id="transport-4" name="transport_method[]" class="form-check-input"
                                                    type="checkbox" value="train">
                                                <label class="form-check-label" for="transport-4">Treno</label>
                                            </div>
                                            <div class="form-check">
                                                <input id="transport-5" name="transport_method[]" class="form-check-input"
                                                    type="checkbox" value="plane">
                                                <label class="form-check-label" for="transport-5">Aereo</label>
                                            </div>
                                            <div class="form-check">
                                                <input id="transport-6" name="transport_method[]" class="form-check-input"
                                                    type="checkbox" value="car sharing">
                                                <label class="form-check-label" for="transport-6">Carpooling(BLABLA
                                                    Car)</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="customdestination-id-input"> Verso che città ti sposti
                                                abitualmente?</label>
                                            <input id="customdestination-input" name="destionation_selected" class="form-control form-control-sm">
                                        </div>
                                    </div>
                                </fieldset>
                                <hr>
                                <fieldset>
                                    <div class="row justify-content-center">
                                        <div class="col">
                                            <legend class="font-weight-light">Percezione Stazione</legend>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p><b>SCENARIO: </b>Devi andare a Roma/Milano con il treno ad alta
                                                velocità; quale di
                                                questi terminal prenderesti in considerazione?</p>
                                            <p class="text-muted">Clicca e visualizza le distanze</p>
                                            <button type="button" class="btn btn-outline-info btn-sm" onclick="checkDistances()">Visualizza
                                                Distanze</button></p>
                                            <div id="departure-list"></div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-xs-12">
                                            <legend class="col-form-label pt-0">STAZIONE NAPOLI
                                                CENTRALE</legend>
                                            <div class="form-check">
                                                <input type="hidden" name="stations[0][name]" value="STAZIONE NAPOLI CENTRALE">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" name="stations[0][choice]" onclick="handleClickCheckbox(this)"
                                                        type="radio" id="station1-yes-radio" value="yes" required>
                                                    <label class="form-check-label" for="station1-yes-radio">Si</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" name="stations[0][choice]" onclick="handleClickCheckbox(this)"
                                                        type="radio" id="station1-no-radio" value="no" required>
                                                    <label class="form-check-label" for="station1-no-radio">No</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="station-1-div" style="display: none" class="form-group col-xs-12">
                                            <label>Perchè no?</label>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[0][reason][]" class="form-check-input"
                                                    type="checkbox" value="0">
                                                <label class="form-check-label">Non c'ho mai
                                                    pensato</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[0][reason][]" class="form-check-input"
                                                    type="checkbox" value="1">
                                                <label class="form-check-label" >E' troppo lontana</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[0][reason][]" class="form-check-input"
                                                    type="checkbox" value="2">
                                                <label class="form-check-label" >E' mal collegata con
                                                    i mezzi pubblici</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[0][reason][]" class="form-check-input"
                                                    type="checkbox" value="3">
                                                <label class="form-check-label" >E' poco sicura</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[0][reason][]" class="form-check-input"
                                                    type="checkbox" value="4">
                                                <label class="form-check-label" >Ha pochi servizi
                                                    commerciali e di ristorazione</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[0][reason][]" class="form-check-input"
                                                    type="checkbox" value="5">
                                                <label class="form-check-label" >E' difficile/costoso
                                                    parcheggiare</label>
                                            </div>
                                            <div class="form-check">
                                                <input id="station1-other-choice"  onclick="handleClickCheckbox(this)" name="stations[0][reason][]" class="form-check-input"
                                                    type="checkbox" value="6">
                                                <label class="form-check-label" >Altro</label>
                                            </div>
                                            <!-- <select onchange="handleChangeSelection(this)" id="station1-reason-input"
                                                name="stations[0][reason]" class="form-control form-control-sm">
                                                <option selected value=""></option>
                                                <input value="never thought">Non c'ho mai
                                                    pensato</option>
                                                <option value="too far">E' troppo lontana</option>
                                                <option value="badly connected">E' mal collegata con
                                                    i mezzi pubblici</option>
                                                <option value="unsafe">E' poco sicura</option>
                                                <option value="few services/restaurants">Ha pochi servizi
                                                    commerciali e di ristorazione</option>
                                                <option value="expensive parking">E' difficile/costoso
                                                    parcheggiare</option>
                                                <option value="other">Altro</option>
                                            </select> -->

                                        </div>
                                    </div>

                                    <div class="row" style="display: none" id="station-1-hidden">
                                        <div class="form-group col-xs-12">
                                            <input name="stations[0][custom_reason]" placeholder="Descrivi altro..."
                                                class="form-control form-control-sm">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-xs-12">
                                            <legend class="col-form-label pt-0">STAZIONE AFRAGOLA</legend>
                                            <div class="form-check">
                                                <input type="hidden" name="stations[1][name]" value="STAZIONE AFRAGOLA">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" name="stations[1][choice]" onclick="handleClickCheckbox(this)"
                                                        type="radio" id="station2-yes-radio" value="yes" required>
                                                    <label class="form-check-label" for="station2-yes-radio">Si</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" name="stations[1][choice]" onclick="handleClickCheckbox(this)"
                                                        type="radio" id="station2-no-radio" value="no" required>
                                                    <label class="form-check-label" for="station2-no-radio">No</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="display:none" id="station-2-div" class="form-group col-xs-12">
                                            <label>Perchè no?</label>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[1][reason][]" class="form-check-input"
                                                    type="checkbox" value="0">
                                                <label class="form-check-label">Non c'ho mai
                                                    pensato</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[1][reason][]" class="form-check-input"
                                                    type="checkbox" value="1">
                                                <label class="form-check-label" >E' troppo lontana</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[1][reason][]" class="form-check-input"
                                                    type="checkbox" value="2">
                                                <label class="form-check-label" >E' mal collegata con
                                                    i mezzi pubblici</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[1][reason][]" class="form-check-input"
                                                    type="checkbox" value="3">
                                                <label class="form-check-label" >E' poco sicura</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[1][reason][]" class="form-check-input"
                                                    type="checkbox" value="4">
                                                <label class="form-check-label" >Ha pochi servizi
                                                    commerciali e di ristorazione</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[1][reason][]" class="form-check-input"
                                                    type="checkbox" value="5">
                                                <label class="form-check-label" >E' difficile/costoso
                                                    parcheggiare</label>
                                            </div>
                                            <div class="form-check">
                                                <input id="station2-other-choice" name="stations[1][reason][]" onclick="handleClickCheckbox(this)" class="form-check-input"
                                                    type="checkbox" value="6">
                                                <label class="form-check-label" >Altro</label>
                                            </div>
                                            <!-- <select onchange="handleChangeSelection(this)" id="station2-reason-input"
                                                name="stations[1][reason]" class="form-control form-control-sm">
                                                <option selected value=""></option>
                                                <option value="never thought">Non c'ho mai
                                                    pensato</option>
                                                <option value="too far">E' troppo lontana</option>
                                                <option value="badly connected">E' mal collegata con
                                                    i mezzi pubblici</option>
                                                <option value="unsafe">E' poco sicura</option>
                                                <option value="few services/restaurants">Ha pochi servizi
                                                    commerciali e di ristorazione</option>
                                                <option value="expensive parking">E' difficile/costoso
                                                    parcheggiare</option>
                                                <option value="other">Altro</option>
                                            </select> -->
                                        </div>
                                    </div>
                                    <div class="row" style="display: none" id="station-2-hidden">
                                        <div class="form-group col-xs-12">
                                            <input name="stations[1][custom_reason]" placeholder="Descrivi altro..."
                                                class="form-control form-control-sm">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-xs-12">
                                            <legend class="col-form-label pt-0">STAZIONE SALERNO</legend>
                                            <div class="form-check">
                                                <input type="hidden" name="stations[2][name]" value="STAZIONE SALERNO">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" name="stations[2][choice]" onclick="handleClickCheckbox(this)"
                                                        type="radio" id="station3-yes-radio" value="yes" required>
                                                    <label class="form-check-label" for="station3-yes-radio">Si</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" name="stations[2][choice]" onclick="handleClickCheckbox(this)"
                                                        type="radio" id="station3-no-radio" value="no" required>
                                                    <label class="form-check-label" for="station3-no-radio">No</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="display:none" id="station-3-div" class="form-group col-xs-12">
                                            <label for="annualmoves-input">Perchè no?</label>
                                            <label>Perchè no?</label>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[2][reason][]" class="form-check-input"
                                                    type="checkbox" value="0">
                                                <label class="form-check-label">Non c'ho mai
                                                    pensato</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[2][reason][]" class="form-check-input"
                                                    type="checkbox" value="1">
                                                <label class="form-check-label" >E' troppo lontana</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[2][reason][]" class="form-check-input"
                                                    type="checkbox" value="2">
                                                <label class="form-check-label" >E' mal collegata con
                                                    i mezzi pubblici</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[2][reason][]" class="form-check-input"
                                                    type="checkbox" value="3">
                                                <label class="form-check-label" >E' poco sicura</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[2][reason][]" class="form-check-input"
                                                    type="checkbox" value="4">
                                                <label class="form-check-label" >Ha pochi servizi
                                                    commerciali e di ristorazione</label>
                                            </div>
                                            <div class="form-check col-xs-6">
                                                <input name="stations[2][reason][]" class="form-check-input"
                                                    type="checkbox" value="5">
                                                <label class="form-check-label" >E' difficile/costoso
                                                    parcheggiare</label>
                                            </div>
                                            <div class="form-check">
                                                <input id="station3-other-choice" onclick="handleClickCheckbox(this)" name="stations[2][reason][]" class="form-check-input"
                                                    type="checkbox" value="6">
                                                <label class="form-check-label" >Altro</label>
                                            </div>
                                            <!-- <select onchange="handleChangeSelection(this)" id="station3-reason-input"
                                                name="stations[2][reason]" class="form-control form-control-sm">
                                                <option selected value=""></option>
                                                <option value="never thought">Non c'ho mai
                                                    pensato</option>
                                                <option value="too far">E' troppo lontana</option>
                                                <option value="badly connected">E' mal collegata con
                                                    i mezzi pubblici</option>
                                                <option value="unsafe">E' poco sicura</option>
                                                <option value="few services/restaurants">Ha pochi servizi
                                                    commerciali e di ristorazione</option>
                                                <option value="expensive parking">E' difficile/costoso
                                                    parcheggiare</option>
                                                <option value="other">Altro</option>
                                            </select> -->
                                        </div>
                                    </div>
                                    <div class="row" style="display: none" id="station-3-hidden">
                                        <div class="form-group col-xs-12">
                                            <input name="stations[2][custom_reason]" placeholder="Descrivi altro..."
                                                class="form-control form-control-sm">
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <button type="submit" style="display: none;" id="form-btn" class="my-2 btn btn-success">Conferma</button>
                    </form>
                </div>
            </div>
        </div>
        <script>
            function handleClickCheckbox(element) {
                switch (element.id) {
                    case "station1-yes-radio":
                        $('#station-1-div').css('display', 'none');
                        break;
                    case "station1-no-radio":
                        $('#station-1-div').css('display', 'block');
                        break;
                    case "station2-yes-radio":
                        $('#station-2-div').css('display', 'none');
                        break;
                    case "station2-no-radio":
                        $('#station-2-div').css('display', 'block');
                        break;
                    case "station3-yes-radio":
                        $('#station-3-div').css('display', 'none');
                        break;
                    case "station3-no-radio":
                        $('#station-3-div').css('display', 'block');
                        break;
                        case "station1-other-choice":
                        if (element.checked) {
                            $('#station-1-hidden').css('display', 'block');
                        } else {
                            $('#station-1-hidden').css('display', 'none');
                        }
                        break;
                        case "station2-other-choice":
                        if (element.checked) {
                            $('#station-2-hidden').css('display', 'block');
                        } else {
                            $('#station-2-hidden').css('display', 'none');
                        }
                        break;
                    case "station3-other-choice":
                        if (element.checked) {
                            $('#station-3-hidden').css('display', 'block');
                        } else {
                            $('#station-3-hidden').css('display', 'none');
                        }
                        break;
                }
            }

            function handleChangeSelection(el) {
                switch (el.id) {
                    case "station1-reason-input":
                        if (el.value == 'other') {
                            $('#station-1-hidden').css('display', 'block');
                        } else {
                            $('#station-1-hidden').css('display', 'none');
                        }
                        break;
                    case "station2-reason-input":
                        if (el.value == 'other') {
                            $('#station-2-hidden').css('display', 'block');
                        } else {
                            $('#station-2-hidden').css('display', 'none');
                        }
                        break;
                    case "station3-reason-input":
                        if (el.value == 'other') {
                            $('#station-3-hidden').css('display', 'block');
                        } else {
                            $('#station-3-hidden').css('display', 'none');
                        }
                        break;
                }
            }
        </script>
        <script>
            var distances = null;

            function checkDistances() {
                var departure = $("#departure-input").val(); //recupera l'elemento con id (#) uguale a 'departure-input'
                var customdestination = $("#customdestination-input").val() ? $("#customdestination-input").val() : '';

                //Crea la chiamata ajax al server per recuperare la lista di distanze
                $.post('https://marcos-survey-pr-1550269884833.firebaseapp.com/api', {
                        from: departure,
                        to: customdestination
                    })
                    .then(function (response) {
                        distances = response.distances;
                        console.log(distances);
                        var list = "";
                        $.each(distances, function (i, element) {
                            if (i != 3) {
                                list = list + "<li>To <b>" + element.destination + "</b> (distance: " +
                                    element
                                    .distance.text + " - duration: " + element.duration.text + ")</li>"
                            }
                        })
                        $("#departure-list").empty()
                        $("#departure-list").append("<ul>" +
                            list +
                            "</ul>");
                        $("#form-btn").css("display", "block");
                    })
            }

            function submitSurvey() {
                var elements = $("#survey-form").serializeArray();
                var json = {};

               json = $('#survey-form').serializeJSON();
                console.log(json);
                var data = Object.assign({
                    distances: distances
                }, json);
                console.log(data);

                $.post('https://marcos-survey-pr-1550269884833.firebaseapp.com/api/confirmSurvey',
                        data)
                    .then(response => {
                        alert(response.message);
                        location.reload();
                    })
                return false;
            }
        </script>
    </body>
</html>